!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(jQuery)}(function(e){e.expander={version:"1.7.0",defaults:{slicePoint:100,sliceOn:null,preserveWords:!0,normalizeWhitespace:!0,showWordCount:!1,detailPrefix:" ",wordCountText:" ({{count}} words)",widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,wordEnd:/(&(?:[^;]+;)?|[0-9a-zA-Z\u00C0-\u0100]+|[^\u0000-\u007F]+)$/,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",moreLinkClass:"more-link",lessLinkClass:"less-link",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},e.fn.expander=function(a){function l(e,a){var l="span",n=e.summary,s=h.exec(n),t=s?s[2].toLowerCase():"";return a?(l="div",s&&"a"!==t&&!e.expandAfterSummary?n=n.replace(h,e.moreLabel+"$1"):n+=e.moreLabel,n='<div class="'+e.summaryClass+'">'+n+"</div>"):n+=e.moreLabel,[n,e.detailPrefix||"","<",l+' class="'+e.detailClass+'"',">",e.details,"</"+l+">"].join("")}function n(e,a){var l='<span class="'+e.moreClass+'">'+e.expandPrefix;return e.showWordCount?e.wordCountText=e.wordCountText.replace(/\{\{count\}\}/,a.replace(u,"").replace(/\&(?:amp|nbsp);/g,"").replace(/(?:^\s+|\s+$)/,"").match(/\w+/g).length):e.wordCountText="",l+='<a href="#" class="'+e.moreLinkClass+'">'+e.expandText+e.wordCountText+"</a></span>"}function s(a,l){return a.lastIndexOf("<")>a.lastIndexOf(">")&&(a=a.slice(0,a.lastIndexOf("<"))),l&&(a=a.replace(f,"")),e.trim(a)}function t(e,a){a.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){a.prev("span."+e.moreClass).show().length||a.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show(),e.afterCollapse&&e.afterCollapse.call(a)})}function r(a,l,n){a.collapseTimer&&(d=setTimeout(function(){t(a,l),e.isFunction(a.onCollapse)&&a.onCollapse.call(n,!1)},a.collapseTimer))}function i(a){var l="ExpandMoreHere374216623",n=a.summaryText.replace(a.sliceOn,l);n=e("<div>"+n+"</div>").text();var s=n.indexOf(l),t=a.summaryText.indexOf(a.sliceOn);return-1!==s&&s<a.slicePoint&&(a.summaryText=a.allHtml.slice(0,t)),a}var o="init";"string"==typeof a&&(o=a,a={});var d,c=e.extend({},e.expander.defaults,a),p=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,f=c.wordEnd,u=/<\/?(\w+)[^>]*>/g,m=/<(\w+)[^>]*>/g,x=/<\/(\w+)>/g,h=/(<\/([^>]+)>)\s*$/,C=/^(<[^>]+>)+.?/,v=/\s\s+/g,y=function(a){return c.normalizeWhitespace?e.trim(a||"").replace(v," "):a},g={init:function(){this.each(function(){var a,o,f,h,v,g,w,E,T,b,S,k,P,O,j,L=[],D=[],I="",$={},A=this,W=e(this),z=e([]),F=e.extend({},c,W.data("expander")||e.meta&&W.data()||{}),H=!!W.find("."+F.detailClass).length,U=!!W.find("*").filter(function(){return/^block|table|list/.test(e(this).css("display"))}).length,q=U?"div":"span",M=q+"."+F.detailClass,Q=F.moreClass+"",Z=F.lessClass+"",B=F.expandSpeed||0,G=y(W.html()),J=G.slice(0,F.slicePoint);if(F.moreSelector="span."+Q.split(" ").join("."),F.lessSelector="span."+Z.split(" ").join("."),!e.data(this,"expanderInit")){for(e.data(this,"expanderInit",!0),e.data(this,"expander",F),e.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(a,l){$[l]=e.isFunction(F[l])}),J=s(J),v=J.replace(u,"").length;v<F.slicePoint;)h=G.charAt(J.length),"<"===h&&(h=G.slice(J.length).match(C)[0]),J+=h,v++;for(F.sliceOn&&(j=i({sliceOn:F.sliceOn,slicePoint:F.slicePoint,allHtml:G,summaryText:J}),J=j.summaryText),J=s(J,F.preserveWords&&G.slice(J.length).length),g=J.match(m)||[],w=J.match(x)||[],f=[],e.each(g,function(e,a){p.test(a)||f.push(a)}),g=f,o=w.length,a=0;o>a;a++)w[a]=w[a].replace(x,"$1");if(e.each(g,function(a,l){var n=l.replace(m,"$1"),s=e.inArray(n,w);-1===s?(L.push(l),D.push("</"+n+">")):w.splice(s,1)}),D.reverse(),H)T=W.find(M).remove().html(),J=W.html(),G=J+T,E="";else{if(T=G.slice(J.length),""===(b=e.trim(T.replace(u,"")))||b.split(/\s+/).length<F.widow)return;E=D.pop()||"",J+=D.join(""),T=L.join("")+T}F.moreLabel=W.find(F.moreSelector).length?"":n(F,T),U?T=G:"&"===J.charAt(J.length-1)&&(I=/^[#\w\d\\]+;/.exec(T))&&(T=T.slice(I[0].length),J+=I[0]),J+=E,F.summary=J,F.details=T,F.lastCloseTag=E,$.onSlice&&(f=F.onSlice.call(A,F),F=f&&f.details?f:F),S=l(F,U),W.empty().append(S),P=W.find(M),O=W.find(F.moreSelector),"slideUp"===F.collapseEffect&&"slideDown"!==F.expandEffect||W.is(":hidden")?P.css({display:"none"}):P[F.collapseEffect](0),z=W.find("div."+F.summaryClass),k=function(e){e.preventDefault();var a=e.startExpanded?0:B;O.hide(),z.hide(),$.beforeExpand&&F.beforeExpand.call(A),P.stop(!1,!0)[F.expandEffect](a,function(){P.css({zoom:""}),$.afterExpand&&F.afterExpand.call(A),r(F,P,A)})},O.find("a").unbind("click.expander").bind("click.expander",k),F.userCollapse&&!W.find(F.lessSelector).length&&W.find(M).append('<span class="'+F.lessClass+'">'+F.userCollapsePrefix+'<a href="#" class="'+F.lessLinkClass+'">'+F.userCollapseText+"</a></span>"),W.find(F.lessSelector+" a").unbind("click.expander").bind("click.expander",function(a){a.preventDefault(),clearTimeout(d);var l=e(this).closest(M);t(F,l),$.onCollapse&&F.onCollapse.call(A,!0)}),F.startExpanded&&k({preventDefault:function(){},startExpanded:!0})}})},destroy:function(){this.each(function(){var a,l,n=e(this);n.data("expanderInit")&&(a=e.extend({},n.data("expander")||{},c),l=n.find("."+a.detailClass).contents(),n.removeData("expanderInit"),n.removeData("expander"),n.find(a.moreSelector).remove(),n.find("."+a.summaryClass).remove(),n.find("."+a.detailClass).after(l).remove(),n.find(a.lessSelector).remove())})}};return g[o]&&g[o].call(this),this},e.fn.expander.defaults=e.expander.defaults});